# 🧪 本地测试 - 使用 Python HTTP 服务器

## ⚠️ 注意

由于 Wrangler 启动遇到权限问题，我们改用 Python 的简单 HTTP 服务器。

**限制**：
- ✅ 可以测试前端修复（验证错误处理）
- ✅ 可以测试计算功能
- ❌ **不支持 API 路由**（OAuth、用户认证等功能无法测试）

## 🌐 访问地址

**主页面**: http://localhost:8788/index.html

## ✅ 测试步骤

### 1. 清除浏览器缓存
- Mac: `Cmd + Shift + Delete`
- 或硬刷新：`Cmd + Shift + R`

### 2. 测试验证错误处理（重点）

#### 测试 1：不填写日期
1. 打开 http://localhost:8788/index.html
2. **不填写任何日期**
3. 点击「啟動人生戰略引擎」
4. **预期结果**：显示友好的错误消息 "请填写完整的出生日期"
5. **不应该出现**：`TypeError: Cannot read properties of undefined (reading '0')`

#### 测试 2：不填写时间（精确模式）
1. 填写日期（例如：2024-01-01）
2. 选择「精确时间」模式
3. **不填写时间**
4. 点击「啟動人生戰略引擎」
5. **预期结果**：显示 "请填写出生时间"

#### 测试 3：不选择时辰（时辰模式）
1. 填写日期
2. 选择「时辰」模式
3. **不选择时辰**
4. 点击「啟動人生戰略引擎」
5. **预期结果**：显示 "请选择时辰"

### 3. 检查浏览器控制台

打开浏览器开发者工具（F12），检查 Console：

**应该看到**：
- ✅ 没有 `TypeError` 错误
- ✅ 脚本正常加载（`calculation-flow.js?v=3`、`ui.js?v=4`）

**不应该看到**：
- ❌ `TypeError: Cannot read properties of undefined (reading '0')`
- ❌ `Cannot destructure property` 错误

### 4. 测试正常计算流程
1. 填写完整的出生信息
2. 点击「啟動人生戰略引擎」
3. **预期结果**：正常计算并显示结果
4. **检查**：Strategic Panel 是否正确显示

## 🛑 停止服务器

在终端按 `Ctrl + C` 停止服务器

## 🔧 如果需要测试 API 功能

如果后续需要测试 OAuth 等 API 功能，需要解决 Wrangler 的权限问题：

1. 创建 `.wrangler` 目录并设置权限
2. 或者使用其他端口
3. 或者直接在生产环境测试（已部署）
