# æµæœˆè©³ç´°è§£é‡‹ç³»çµ±å®Œæˆå ±å‘Š

## âœ… å·²å¯¦ç¾çš„åŠŸèƒ½

### 1. æ ¸å¿ƒæ¨¡çµ„ï¼š`js/calc/monthlyDetailedAnalysis.js`

æ•´åˆäº”è¡Œã€ç´«å¾®å’Œå¤§å‹äº‹ä»¶åˆ†æï¼Œç”Ÿæˆã€Œé©åˆåšä»€éº¼ã€ä¸é©åˆåšä»€éº¼ã€çš„è©³ç´°å»ºè­°ã€‚

### 2. å¤§å‹äº‹ä»¶é¡åˆ¥

ç³»çµ±æ”¯æ´ä»¥ä¸‹6å¤§é¡åˆ¥çš„äº‹ä»¶åˆ†æï¼š

- **æŠ•è³‡ç†è²¡** (INVESTMENT)
- **è¬€è·äº‹æ¥­** (CAREER)
- **å¥åº·é¤Šç”Ÿ** (HEALTH)
- **å®¶åº­é—œä¿‚** (FAMILY)
- **æƒ…ç·’ç®¡ç†** (EMOTION)
- **äº‹æ¥­ç™¼å±•** (BUSINESS)

### 3. åˆ†æç¶­åº¦

#### 3.1 å®®ä½åˆ†æ
- æµæœˆå°æ‡‰çš„ç´«å¾®å®®ä½ï¼ˆ1æœˆ=å‘½å®®ï¼Œ2æœˆ=å…„å¼Ÿ...ï¼‰
- å®®ä½èƒ½é‡ç­‰ç´šï¼ˆåŸºæ–¼ `palaceInternalLevel`ï¼‰
- å®®ä½æ˜Ÿæ›œç‰¹è³ª
- å®®ä½å››åŒ–æƒ…æ³ï¼ˆåŒ–ç¥¿ç–ŠåŠ /åŒ–å¿Œç–ŠåŠ ï¼‰

#### 3.2 äº”è¡Œåˆ†æ
- æµæœˆäº”è¡ŒåŠ æ¬Šï¼ˆè€ƒæ…®æœˆä»½å°äº”è¡Œçš„å½±éŸ¿ï¼‰
- æœ€å¼·äº”è¡Œå’Œæœ€å¼±äº”è¡Œ
- äº”è¡Œèˆ‡äº‹ä»¶çš„å°æ‡‰é—œä¿‚

#### 3.3 å¥åº·é¢¨éšªåˆ†æ
- æœˆåº¦å¥åº·é¢¨éšªç­‰ç´šï¼ˆcritical/warning/normalï¼‰
- å¥åº·ç›¸é—œäº‹ä»¶çš„å»ºè­°èª¿æ•´

#### 3.4 ç–Šå®®åˆ†æ
- åŒ–å¿Œç–ŠåŠ é¢¨éšªæç¤º
- åŒ–ç¥¿ç–ŠåŠ æ©Ÿæœƒæç¤º

### 4. è¼¸å‡ºçµæ§‹

```javascript
{
  monthNum: 3,
  monthName: "3æœˆ",
  palace: "å¤«å¦»",
  energyLevel: "high", // "high" | "medium" | "low"
  riskScore: 35,
  healthRiskLevel: "normal",
  
  // é©åˆçš„äº‹ä»¶
  suitableEvents: [
    {
      category: "å®¶åº­é—œä¿‚",
      advice: "é©åˆè™•ç†å®¶åº­äº‹å‹™ï¼Œå¯é€²è¡Œé‡è¦å®¶åº­æ±ºç­–æˆ–èšæœƒ",
      reason: "æµæœˆåœ¨å¤«å¦»ï¼Œæ­¤å®®ä½èƒ½é‡å¼·"
    },
    {
      category: "æƒ…ç·’ç®¡ç†",
      advice: "é©åˆæƒ…ç·’è¡¨é”å’Œæºé€šï¼Œå¯é€²è¡Œå¿ƒç†è«®è©¢æˆ–æƒ…ç·’ç®¡ç†",
      reason: "æœ¬æœˆæœ¨æ°£æ—ºç››ï¼Œé©åˆæƒ…ç·’ç®¡ç†ç›¸é—œæ´»å‹•"
    }
  ],
  
  // ä¸é©åˆçš„äº‹ä»¶
  unsuitableEvents: [
    {
      category: "æŠ•è³‡ç†è²¡",
      advice: "ä¸é©åˆé«˜é¢¨éšªæŠ•è³‡ï¼Œé¿å…å¤§é¡è³‡é‡‘æ“ä½œ",
      reason: "æµæœˆåœ¨å¤«å¦»ï¼Œæ­¤å®®ä½èƒ½é‡è¼ƒå¼±"
    }
  ],
  
  // ç¶œåˆå»ºè­°
  comprehensiveAdvice: "æœ¬æœˆèƒ½é‡é€šé“å®Œå…¨é–‹å•Ÿï¼Œé©åˆåŸ·è¡Œé‡å¤§æ±ºç­–å’Œå•Ÿå‹•é‡è¦è¨ˆç•«ã€‚ğŸ’° å¤«å¦»æœ‰åŒ–ç¥¿ç–ŠåŠ ï¼Œé€™æ˜¯é›£å¾—çš„æ©Ÿæœƒï¼Œå¯æŠŠæ¡æ™‚æ©Ÿæ¨é€²ç›¸é—œè¨ˆç•«ã€‚æµæœˆåœ¨å¤«å¦»ï¼Œä¸»æ˜Ÿç‚ºå¤©åŒï¼Œæ­¤æ˜Ÿæ›œçš„ç‰¹è³ªæœƒåœ¨æœ¬æœˆç‰¹åˆ¥æ˜é¡¯ã€‚",
  
  // å®®ä½åˆ†æè©³æƒ…
  palaceAnalysis: {
    internalLevel: 4,
    stars: ["å¤©åŒ", "å¤ªé™°"],
    hasCriticalRisk: false,
    hasMaxOpportunity: true
  },
  
  // äº”è¡Œåˆ†æè©³æƒ…
  elementAnalysis: {
    strongestElement: "æœ¨",
    weakestElement: "é‡‘",
    monthElementWeights: { "æœ¨": 1.1, "ç«": 0.95 }
  }
}
```

## ğŸ“Š ä½¿ç”¨ç¯„ä¾‹

### åŸºæœ¬ä½¿ç”¨

```javascript
// åœ¨ expert-admin.html æˆ–å‰ç«¯ä»£ç¢¼ä¸­
const monthData = bazi.liuyue2026.bounds[2]; // 3æœˆæ•¸æ“š
const analysis = window.MonthlyDetailedAnalysis.generateMonthlyDetailedAnalysis({
  monthNum: 3,
  monthData: monthData,
  ziweiPalaceMetadata: window.ziweiPalaceMetadata,
  wuxingData: bazi.wuxing,
  overlapAnalysis: window.overlapAnalysis,
  fourTransformations: window.fourTransformations,
  monthlyHealthRisk: window.monthlyHealthRisk
});

console.log("é©åˆåšä»€éº¼ï¼š", analysis.suitableEvents);
console.log("ä¸é©åˆåšä»€éº¼ï¼š", analysis.unsuitableEvents);
console.log("ç¶œåˆå»ºè­°ï¼š", analysis.comprehensiveAdvice);
```

### æ‰¹é‡ç”Ÿæˆ12å€‹æœˆåˆ†æ

```javascript
function generateAllMonthsAnalysis() {
  const allMonthsAnalysis = [];
  
  for (let month = 1; month <= 12; month++) {
    const monthData = bazi.liuyue2026.bounds[month - 1];
    const analysis = window.MonthlyDetailedAnalysis.generateMonthlyDetailedAnalysis({
      monthNum: month,
      monthData: monthData,
      ziweiPalaceMetadata: window.ziweiPalaceMetadata,
      wuxingData: bazi.wuxing,
      overlapAnalysis: window.overlapAnalysis,
      fourTransformations: window.fourTransformations,
      monthlyHealthRisk: window.monthlyHealthRisk
    });
    
    allMonthsAnalysis.push(analysis);
  }
  
  return allMonthsAnalysis;
}
```

## ğŸ¯ å»ºè­°é‚è¼¯èªªæ˜

### 1. é©åˆäº‹ä»¶çš„åˆ¤æ–·

- **å®®ä½èƒ½é‡é«˜**ï¼ˆinternalLevel >= 4ï¼‰ï¼šè©²å®®ä½ç›¸é—œäº‹ä»¶é©åˆ
- **äº”è¡Œæ—ºç››**ï¼šå°æ‡‰çš„äº‹ä»¶é¡åˆ¥é©åˆ
- **åŒ–ç¥¿ç–ŠåŠ **ï¼šæŠ•è³‡ã€äº‹æ¥­ç›¸é—œäº‹ä»¶ç‰¹åˆ¥é©åˆ
- **å¥åº·é¢¨éšªä½**ï¼šå¥åº·ç›¸é—œäº‹ä»¶é©åˆ

### 2. ä¸é©åˆäº‹ä»¶çš„åˆ¤æ–·

- **å®®ä½èƒ½é‡ä½**ï¼ˆinternalLevel <= 2ï¼‰ï¼šè©²å®®ä½ç›¸é—œäº‹ä»¶ä¸é©åˆ
- **äº”è¡Œåå¼±**ï¼šå°æ‡‰çš„äº‹ä»¶é¡åˆ¥ä¸é©åˆ
- **åŒ–å¿Œç–ŠåŠ **ï¼šæŠ•è³‡ã€äº‹æ¥­ç›¸é—œäº‹ä»¶ç‰¹åˆ¥ä¸é©åˆ
- **å¥åº·é¢¨éšªé«˜**ï¼šå¥åº·ç›¸é—œäº‹ä»¶ä¸é©åˆ

### 3. èƒ½é‡ç­‰ç´šè¨ˆç®—

```
åŸºç¤èƒ½é‡ = 100 - é¢¨éšªåˆ†æ•¸
+ å®®ä½ç­‰ç´šèª¿æ•´ï¼ˆç­‰ç´šè¶Šé«˜ï¼ŒåŠ æˆè¶Šå¤šï¼‰
- åŒ–å¿Œç–ŠåŠ æ‡²ç½°ï¼ˆ-20ï¼‰
+ åŒ–ç¥¿ç–ŠåŠ åŠ æˆï¼ˆ+20ï¼‰

æœ€çµ‚ç­‰ç´šï¼š
- high: >= 70
- medium: 40-69
- low: < 40
```

## ğŸ”— æ•´åˆå»ºè­°

### 1. åœ¨æµæœˆå¡ç‰‡ä¸­é¡¯ç¤º

å¯ä»¥åœ¨ `js/ui/components/liuyue-month.js` ä¸­æ•´åˆï¼Œç•¶ç”¨æˆ¶é»æ“Šå±•é–‹æµæœˆå¡ç‰‡æ™‚ï¼Œé¡¯ç¤ºè©³ç´°çš„ã€Œé©åˆåšä»€éº¼ã€ä¸é©åˆåšä»€éº¼ã€å»ºè­°ã€‚

### 2. åœ¨å°ˆå®¶å¾Œå°é¡¯ç¤º

åœ¨ `expert-admin.html` ä¸­æ·»åŠ ä¸€å€‹æ–°çš„å€å¡Šï¼Œé¡¯ç¤º12å€‹æœˆçš„è©³ç´°åˆ†æï¼Œæ–¹ä¾¿å°ˆå®¶æŸ¥çœ‹å’Œæä¾›å»ºè­°ã€‚

### 3. åœ¨AI Promptä¸­æ•´åˆ

å¯ä»¥å°‡ `comprehensiveAdvice` æ•´åˆåˆ° AI Prompt ç”Ÿæˆå™¨ä¸­ï¼Œè®“ AI ç”Ÿæˆçš„å‘½æ›¸åŒ…å«æµæœˆè©³ç´°å»ºè­°ã€‚

## ğŸ“ å¾ŒçºŒå„ªåŒ–å»ºè­°

1. **å¢åŠ æ›´å¤šäº‹ä»¶é¡åˆ¥**ï¼šå¦‚ã€Œå­¸ç¿’é€²ä¿®ã€ã€ã€Œäººéš›é—œä¿‚ã€ç­‰
2. **ç´°åŒ–å»ºè­°æ¨¡æ¿**ï¼šæ ¹æ“šä¸åŒæ˜Ÿæ›œçµ„åˆæä¾›æ›´ç²¾æº–çš„å»ºè­°
3. **å¢åŠ æ™‚é–“ç¯€é»å»ºè­°**ï¼šå¦‚ã€Œæœˆåˆé©åˆ...ï¼Œæœˆåº•é©åˆ...ã€
4. **å¢åŠ äº’å‹•æ€§**ï¼šè®“ç”¨æˆ¶å¯ä»¥æ¨™è¨˜å“ªäº›å»ºè­°å°ä»–å€‘æœ‰ç”¨ï¼Œç”¨æ–¼å¾ŒçºŒå„ªåŒ–

## âœ… å®Œæˆç‹€æ…‹

- âœ… æ ¸å¿ƒæ¨¡çµ„å¯¦ç¾
- âœ… 6å¤§äº‹ä»¶é¡åˆ¥å®šç¾©
- âœ… å®®ä½ã€äº”è¡Œã€å¥åº·ã€ç–Šå®®åˆ†ææ•´åˆ
- âœ… é©åˆ/ä¸é©åˆäº‹ä»¶ç”Ÿæˆé‚è¼¯
- âœ… ç¶œåˆå»ºè­°ç”Ÿæˆ
- âœ… æ¨¡çµ„å°å‡ºå’Œå¼•ç”¨

## ğŸš€ ä¸‹ä¸€æ­¥

1. åœ¨ UI ä¸­æ•´åˆé¡¯ç¤ºï¼ˆå¯é¸ï¼‰
2. åœ¨å°ˆå®¶å¾Œå°æ·»åŠ è©³ç´°åˆ†æå€å¡Šï¼ˆå¯é¸ï¼‰
3. åœ¨ AI Prompt ä¸­æ•´åˆï¼ˆå¯é¸ï¼‰
4. æ ¹æ“šç”¨æˆ¶åé¥‹å„ªåŒ–å»ºè­°æ¨¡æ¿
