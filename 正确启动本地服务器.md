# âœ… æ­£ç¡®å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨

## âš ï¸ é‡è¦ï¼šå¿…é¡»ä½¿ç”¨ Cloudflare Pages å¼€å‘æœåŠ¡å™¨

è¿™ä¸ªé¡¹ç›®ä½¿ç”¨äº† **Cloudflare Pages Functions**ï¼ˆAPI è·¯ç”±ï¼‰ï¼Œç®€å•çš„ Python HTTP æœåŠ¡å™¨**æ— æ³•å¤„ç† API è¯·æ±‚**ã€‚

## ğŸš€ æ­£ç¡®çš„å¯åŠ¨æ–¹æ³•

### æ–¹æ³• 1ï¼šä½¿ç”¨ Cloudflare Pages å¼€å‘æœåŠ¡å™¨ï¼ˆæ¨èï¼‰

```bash
cd /Users/bill/bazi-project
npx wrangler pages dev . --port 8788
```

ç„¶åè®¿é—®ï¼š
- ä¸»é¡µé¢ï¼š`http://localhost:8788/index.html`
- API æµ‹è¯•ï¼š`http://localhost:8788/api/auth/config`

### æ–¹æ³• 2ï¼šå¦‚æœ wrangler æœªå®‰è£…

```bash
# å®‰è£… wranglerï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
npm install -g wrangler

# æˆ–è€…ä½¿ç”¨ npxï¼ˆæ¨èï¼Œä¸éœ€è¦å…¨å±€å®‰è£…ï¼‰
npx wrangler pages dev . --port 8788
```

## ğŸ” ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ Python HTTP æœåŠ¡å™¨ï¼Ÿ

ç®€å•çš„ `python3 -m http.server` **æ— æ³•å¤„ç†**ï¼š
1. âŒ `/api/*` è·¯ç”±ï¼ˆCloudflare Functionsï¼‰
2. âŒ è·¯ç”±é‡å†™è§„åˆ™
3. âŒ æŸäº› MIME ç±»å‹é—®é¢˜
4. âŒ ç¯å¢ƒå˜é‡ï¼ˆ`.dev.vars`ï¼‰

## ğŸ“‹ å®Œæ•´æµ‹è¯•æ­¥éª¤

### 1. ç¡®ä¿ä¾èµ–å·²å®‰è£…

```bash
# æ£€æŸ¥ Node.js
node --version  # åº”è¯¥æ˜¾ç¤º v16 æˆ–æ›´é«˜ç‰ˆæœ¬

# æ£€æŸ¥ npm
npm --version
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd /Users/bill/bazi-project
npx wrangler pages dev . --port 8788
```

ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
```
â¬£ wrangler pages dev
  Local:   http://localhost:8788
  Network: http://192.168.x.x:8788
```

### 3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

**Chrome/Edge:**
- `Ctrl + Shift + Delete` (Windows) æˆ– `Cmd + Shift + Delete` (Mac)
- é€‰æ‹©ã€Œç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶ã€
- æ—¶é—´èŒƒå›´é€‰æ‹©ã€Œå…¨éƒ¨æ—¶é—´ã€

### 4. ç¡¬åˆ·æ–°é¡µé¢

- Windows/Linux: `Ctrl + F5` æˆ– `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

### 5. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°

æ‰“å¼€å¼€å‘è€…å·¥å…· (`F12`)ï¼Œæ£€æŸ¥ï¼š
- âœ… æ‰€æœ‰ JavaScript æ–‡ä»¶æˆåŠŸåŠ è½½ï¼ˆçŠ¶æ€ç  200ï¼‰
- âœ… ç‰ˆæœ¬å·æ­£ç¡®ï¼ˆ`?v=3`ï¼‰
- âœ… æ²¡æœ‰æ¨¡å—åŠ è½½é”™è¯¯

## ğŸ› å¦‚æœä»ç„¶æœ‰é—®é¢˜

### æ£€æŸ¥ 1ï¼šç¡®è®¤æ–‡ä»¶å·²ä¿å­˜

```bash
# æ£€æŸ¥æ–‡ä»¶ä¿®æ”¹æ—¶é—´
ls -la js/calc/baziCore.js js/calc/fourTransformations.js js/calc.js
```

### æ£€æŸ¥ 2ï¼šç¡®è®¤ç‰ˆæœ¬å·å·²æ›´æ–°

```bash
# æ£€æŸ¥ index.html ä¸­çš„ç‰ˆæœ¬å·
grep "baziCore.js?v=" index.html
# åº”è¯¥æ˜¾ç¤ºï¼šbaziCore.js?v=3
```

### æ£€æŸ¥ 3ï¼šä½¿ç”¨æ— ç—•æ¨¡å¼æµ‹è¯•

æ‰“å¼€æµè§ˆå™¨çš„æ— ç—•/éšç§æ¨¡å¼ï¼Œè®¿é—® `http://localhost:8788/index.html`

### æ£€æŸ¥ 4ï¼šæŸ¥çœ‹ Network æ ‡ç­¾

1. æ‰“å¼€å¼€å‘è€…å·¥å…· (`F12`)
2. åˆ‡æ¢åˆ°ã€ŒNetworkã€æ ‡ç­¾
3. å‹¾é€‰ã€ŒDisable cacheã€
4. åˆ·æ–°é¡µé¢
5. æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶çš„ç‰ˆæœ¬å·

## ğŸ“ å¿«é€Ÿå¯åŠ¨è„šæœ¬

åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ `start-dev.sh`ï¼š

```bash
#!/bin/bash
echo "ğŸš€ å¯åŠ¨ Cloudflare Pages å¼€å‘æœåŠ¡å™¨..."
echo ""
cd "$(dirname "$0")"
npx wrangler pages dev . --port 8788
```

ç„¶åè¿è¡Œï¼š
```bash
chmod +x start-dev.sh
./start-dev.sh
```

## ğŸ¯ æ€»ç»“

**ä¸è¦ä½¿ç”¨ï¼š**
- âŒ `python3 -m http.server 8000`
- âŒ `npx http-server -p 8000`

**å¿…é¡»ä½¿ç”¨ï¼š**
- âœ… `npx wrangler pages dev . --port 8788`

è¿™æ ·æ‰èƒ½ï¼š
- âœ… æ­£ç¡®å¤„ç† API è·¯ç”±
- âœ… åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆ`.dev.vars`ï¼‰
- âœ… æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒ
