# ðŸš€ æž¶æž„ä¼˜åŒ–å®žæ–½è®¡åˆ’

## ðŸ“Š å½“å‰æž¶æž„çŠ¶æ€æ€»ç»“

### âœ… å·²å®Œæˆ
- **æ¨¡å—åŒ–é‡æž„**ï¼šUI ä»Ž 2423 è¡Œ â†’ 891 è¡Œï¼ˆå‡å°‘ 63%ï¼‰
- **Calc æ¨¡å—åŒ–**ï¼šæ‹†åˆ†ä¸º 15+ ä¸ªä¸“ç”¨æ¨¡å—
- **ä¾èµ–ç®¡ç†**ï¼šæ˜Žç¡®çš„ä¾èµ–å…³ç³»å’ŒåŠ è½½é¡ºåº
- **ä»£ç ç»„ç»‡**ï¼šæ¸…æ™°çš„ç›®å½•ç»“æž„

### ðŸ“ˆ ç»Ÿè®¡æ•°æ®
- **æ€»ä»£ç é‡**ï¼š~16,495 è¡Œï¼ˆæ‰€æœ‰ JS æ–‡ä»¶ï¼‰
- **ä¸»æ–‡ä»¶**ï¼š`calc.js` 876 è¡Œï¼Œ`ui.js` 891 è¡Œ
- **è„šæœ¬æ–‡ä»¶**ï¼š48+ ä¸ª JavaScript æ–‡ä»¶
- **æ¨¡å—æ•°**ï¼š19+ ä¸ªæ¨¡å—

## ðŸŽ¯ ä¼˜åŒ–å»ºè®®ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### ðŸ”´ é«˜ä¼˜å…ˆçº§ï¼šç«‹å³å®žæ–½ï¼ˆæœ¬å‘¨ï¼‰

#### 1. æ–‡ä»¶å¼•ç”¨éªŒè¯è‡ªåŠ¨åŒ– â­â­â­

**é—®é¢˜**ï¼š
- 48+ ä¸ªè„šæœ¬æ–‡ä»¶éœ€è¦æ‰‹åŠ¨ç®¡ç†
- å®¹æ˜“å¼•ç”¨ä¸å­˜åœ¨çš„æ–‡ä»¶
- ç¼ºå°‘è‡ªåŠ¨åŒ–æ£€æŸ¥

**è§£å†³æ–¹æ¡ˆ**ï¼š
- âœ… å·²åˆ›å»º `scripts/check-references.sh`
- åœ¨ Git pre-commit hook ä¸­è¿è¡Œ
- åœ¨ CI/CD ä¸­è¿è¡Œ

**å®žæ–½æ­¥éª¤**ï¼š
```bash
# 1. åˆ›å»º pre-commit hook
cat > .git/hooks/pre-commit << 'EOF'
#!/bin/bash
bash scripts/check-references.sh
EOF
chmod +x .git/hooks/pre-commit

# 2. æµ‹è¯•
bash scripts/check-references.sh
```

**é¢„æœŸæ”¶ç›Š**ï¼š
- â¬‡ï¸ å‡å°‘ 90% çš„æ–‡ä»¶å¼•ç”¨é”™è¯¯
- â¬†ï¸ æé«˜éƒ¨ç½²æˆåŠŸçŽ‡

#### 2. ç»Ÿä¸€ç‰ˆæœ¬å·ç®¡ç† â­â­â­

**é—®é¢˜**ï¼š
- 48+ ä¸ªæ–‡ä»¶éœ€è¦æ‰‹åŠ¨æ›´æ–°ç‰ˆæœ¬å·
- å®¹æ˜“é—æ¼æŸäº›æ–‡ä»¶
- ç¼“å­˜é—®é¢˜éš¾ä»¥è¿½è¸ª

**è§£å†³æ–¹æ¡ˆ**ï¼š
- âœ… å·²åˆ›å»º `scripts/bump-version.sh`
- ä½¿ç”¨æ—¶é—´æˆ³æˆ– Git commit hash

**å®žæ–½æ­¥éª¤**ï¼š
```bash
# æ›´æ–°æ‰€æœ‰ç‰ˆæœ¬å·
bash scripts/bump-version.sh $(date +%s)

# æˆ–ä½¿ç”¨ Git commit hash
bash scripts/bump-version.sh $(git rev-parse --short HEAD)
```

**é¢„æœŸæ”¶ç›Š**ï¼š
- â¬†ï¸ å‡å°‘ 80% çš„ç¼“å­˜é—®é¢˜
- â¬†ï¸ æé«˜éƒ¨ç½²æ•ˆçŽ‡

#### 3. éƒ¨ç½²å‰æ£€æŸ¥æµç¨‹ â­â­â­

**é—®é¢˜**ï¼š
- ç¼ºå°‘è‡ªåŠ¨åŒ–æ£€æŸ¥
- å®¹æ˜“éƒ¨ç½²æœ‰é—®é¢˜çš„ä»£ç 

**è§£å†³æ–¹æ¡ˆ**ï¼š
- âœ… å·²åˆ›å»º `scripts/pre-deploy.sh`
- é›†æˆè¯­æ³•æ£€æŸ¥ã€æ–‡ä»¶æ£€æŸ¥ã€ä¾èµ–æ£€æŸ¥

**å®žæ–½æ­¥éª¤**ï¼š
```bash
# è¿è¡Œéƒ¨ç½²å‰æ£€æŸ¥
bash scripts/pre-deploy.sh

# å¦‚æžœé€šè¿‡ï¼Œç»§ç»­éƒ¨ç½²
git push origin main
```

**é¢„æœŸæ”¶ç›Š**ï¼š
- â¬‡ï¸ å‡å°‘ 70% çš„éƒ¨ç½²é”™è¯¯
- â¬†ï¸ æé«˜ä»£ç è´¨é‡

### ðŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼šè¿‘æœŸå®žæ–½ï¼ˆ2-4 å‘¨ï¼‰

#### 4. æŒ‰éœ€åŠ è½½ä¼˜åŒ– â­â­

**é—®é¢˜**ï¼š
- æ‰€æœ‰æ¨¡å—ä¸€æ¬¡æ€§åŠ è½½
- é¦–å±åŠ è½½æ—¶é—´é•¿
- éžå…³é”®æ¨¡å—é˜»å¡žæ¸²æŸ“

**è¯†åˆ«éžå…³é”®æ¨¡å—**ï¼š
- `feedback-widget.js` - åé¦ˆç»„ä»¶ï¼ˆç”¨æˆ·äº¤äº’åŽæ‰éœ€è¦ï¼‰
- `expert-questionnaire.js` - ä¸“å®¶é—®å·ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
- `geolocation-calibration.js` - åœ°ç†ä½ç½®æ ¡å‡†ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰
- `startup-sequence.js` - å¯åŠ¨åŠ¨ç”»ï¼ˆå¯é€‰ï¼‰

**å®žæ–½æ­¥éª¤**ï¼š
1. è¯†åˆ«éžå…³é”®æ¨¡å—
2. å®žçŽ°åŠ¨æ€åŠ è½½å‡½æ•°
3. åœ¨éœ€è¦æ—¶åŠ è½½

**é¢„æœŸæ”¶ç›Š**ï¼š
- â¬‡ï¸ é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 20-30%
- â¬†ï¸ æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

#### 5. çŠ¶æ€ç®¡ç†ä¼˜åŒ– â­â­

**é—®é¢˜**ï¼š
- ä½¿ç”¨å…¨å±€å˜é‡ï¼ˆ`window.ziweiScores`ã€`window.ziweiPalaceMetadata`ï¼‰
- çŠ¶æ€åˆ†æ•£ï¼Œéš¾ä»¥è¿½è¸ª
- å®¹æ˜“äº§ç”ŸçŠ¶æ€ä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**ï¼š
åˆ›å»ºç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†å™¨ `js/state-manager.js`

**é¢„æœŸæ”¶ç›Š**ï¼š
- â¬†ï¸ çŠ¶æ€ç®¡ç†æ›´æ¸…æ™°
- â¬†ï¸ æ›´å®¹æ˜“è°ƒè¯•
- â¬‡ï¸ å‡å°‘çŠ¶æ€ä¸ä¸€è‡´é—®é¢˜

#### 6. é”™è¯¯å¤„ç†å’Œæ—¥å¿—ç³»ç»Ÿ â­â­

**é—®é¢˜**ï¼š
- é”™è¯¯å¤„ç†åˆ†æ•£
- ç¼ºå°‘ç»Ÿä¸€çš„æ—¥å¿—ç³»ç»Ÿ
- ç”Ÿäº§çŽ¯å¢ƒéš¾ä»¥è°ƒè¯•

**è§£å†³æ–¹æ¡ˆ**ï¼š
åˆ›å»ºç»Ÿä¸€çš„æ—¥å¿—ç³»ç»Ÿ `js/utils/logger.js`

**é¢„æœŸæ”¶ç›Š**ï¼š
- â¬†ï¸ æ›´å®¹æ˜“è¿½è¸ªé”™è¯¯
- â¬†ï¸ æ›´å¥½çš„è°ƒè¯•ä½“éªŒ

### ðŸŸ¢ ä½Žä¼˜å…ˆçº§ï¼šé•¿æœŸä¼˜åŒ–ï¼ˆ1-2 ä¸ªæœˆï¼‰

#### 7. ç±»åž‹å®‰å…¨å’Œæ–‡æ¡£ â­

**é—®é¢˜**ï¼š
- ç¼ºå°‘ç±»åž‹å®šä¹‰
- å‡½æ•°å‚æ•°ç±»åž‹ä¸æ˜Žç¡®
- API æ–‡æ¡£ä¸å®Œæ•´

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ·»åŠ å®Œæ•´çš„ JSDoc æ³¨é‡Š
- è€ƒè™‘è¿ç§»åˆ° TypeScriptï¼ˆé•¿æœŸï¼‰

#### 8. æµ‹è¯•è¦†ç›– â­

**é—®é¢˜**ï¼š
- ç¼ºå°‘å•å…ƒæµ‹è¯•
- ç¼ºå°‘é›†æˆæµ‹è¯•
- é‡æž„é£Žé™©é«˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ Jest æˆ– Vitest
- ä¸ºæ ¸å¿ƒè®¡ç®—å‡½æ•°æ·»åŠ æµ‹è¯•

#### 9. æ€§èƒ½ç›‘æŽ§ â­

**é—®é¢˜**ï¼š
- ç¼ºå°‘æ€§èƒ½æŒ‡æ ‡
- æ— æ³•è¿½è¸ªåŠ è½½æ—¶é—´
- æ— æ³•è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ·»åŠ æ€§èƒ½æ ‡è®°
- ç›‘æŽ§å…³é”®æ“ä½œè€—æ—¶

## ðŸ“‹ å¿«é€Ÿå¼€å§‹

### ä»Šå¤©å°±å¯ä»¥åšçš„

1. **è¿è¡Œæ–‡ä»¶å¼•ç”¨æ£€æŸ¥**ï¼š
   ```bash
   bash scripts/check-references.sh
   ```

2. **æ›´æ–°ç‰ˆæœ¬å·**ï¼š
   ```bash
   bash scripts/bump-version.sh $(date +%s)
   ```

3. **è¿è¡Œéƒ¨ç½²å‰æ£€æŸ¥**ï¼š
   ```bash
   bash scripts/pre-deploy.sh
   ```

### æœ¬å‘¨å¯ä»¥åšçš„

4. **å®žçŽ°æŒ‰éœ€åŠ è½½**ï¼ˆé€‰æ‹© 2-3 ä¸ªéžå…³é”®æ¨¡å—ï¼‰

5. **åˆ›å»ºçŠ¶æ€ç®¡ç†å™¨**ï¼ˆæ›¿æ¢å…¨å±€å˜é‡ï¼‰

## ðŸ“Š é¢„æœŸæ”¶ç›Šæ€»ç»“

### å¼€å‘æ•ˆçŽ‡
- â¬†ï¸ å‡å°‘ 50% çš„éƒ¨ç½²é”™è¯¯
- â¬†ï¸ å‡å°‘ 30% çš„è°ƒè¯•æ—¶é—´
- â¬†ï¸ æé«˜ä»£ç è´¨é‡

### æ€§èƒ½
- â¬†ï¸ é¦–å±åŠ è½½æ—¶é—´å‡å°‘ 20-30%
- â¬†ï¸ è¿è¡Œæ—¶æ€§èƒ½æå‡
- â¬†ï¸ æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

### å¯ç»´æŠ¤æ€§
- â¬†ï¸ æ›´å®¹æ˜“å®šä½é—®é¢˜
- â¬†ï¸ æ›´å®¹æ˜“æ·»åŠ æ–°åŠŸèƒ½
- â¬†ï¸ æ›´å®¹æ˜“å›¢é˜Ÿåä½œ

## ðŸŽ¯ ç»“è®º

**å½“å‰æž¶æž„çŠ¶æ€**ï¼šâœ… **è‰¯å¥½ï¼Œä½†å¯ä»¥æ›´å¥½**

**æ ¸å¿ƒå»ºè®®**ï¼š
1. ðŸ”´ **ç«‹å³**ï¼šè‡ªåŠ¨åŒ–æ£€æŸ¥å’ŒéªŒè¯ï¼ˆå·²åˆ›å»ºè„šæœ¬ï¼‰
2. ðŸŸ¡ **è¿‘æœŸ**ï¼šæ€§èƒ½ä¼˜åŒ–å’ŒçŠ¶æ€ç®¡ç†
3. ðŸŸ¢ **é•¿æœŸ**ï¼šæµ‹è¯•è¦†ç›–å’Œç±»åž‹å®‰å…¨

**ä¸éœ€è¦å¤§è§„æ¨¡é‡æž„**ï¼Œåªéœ€è¦ï¼š
- âœ… ä½¿ç”¨å·²åˆ›å»ºçš„è‡ªåŠ¨åŒ–è„šæœ¬
- âœ… ä¼˜åŒ–çŽ°æœ‰æž¶æž„
- âœ… æå‡ä»£ç è´¨é‡
